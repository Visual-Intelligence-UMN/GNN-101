(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(8885)}])},8621:function(e,t,a){"use strict";a.r(t);var n=a(5893),s=a(7294),r=a(7340),i=a(4801);const o=e=>{let{graphPath:t,modelPath:a,setChangedG:s,setIntmData:o,setPredicted:l,predicted:c,probabilities:d,setProbabilities:h,onlyShownButton:u=!1,simulationLoading:x}=e;const p=async()=>{let e,n;l(!0),({prob:e,intmData:n}="./gnn_node_model.onnx"==a?await(0,r.Og)(a,t):"./gnn_model2.onnx"==a?await(0,r.w)(a,t):await(0,r.d_)(a,"./json_data/links/twitch.json")),s(!1),o(n),Array.isArray(e[0]),h(e)},f=c?"./gnn_node_model.onnx"==a?(0,n.jsx)(n.Fragment,{}):Array.isArray(d[0])?(0,n.jsx)("div",{}):d.length>0&&"number"==typeof d[0]?(0,n.jsx)(i.nW,{result:{"Non-Mutagenic":d[0],Mutagenic:d[1]}}):(0,n.jsx)("span",{children:"Predicting..."}):u?(0,n.jsx)("button",{onClick:p,className:" border border-4 opacity-60 hover:opacity-90 hover:border-4 py-1 px-2 rounded-lg text-4xl",style:{color:"rgb(25, 118, 210)",borderColor:"rgb(25, 118, 210)"},children:"Click to Predict!"}):u&&(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)("span",{className:"loading text-xl opacity-60 font-light",style:{color:"rgb(25, 118, 210"},children:"Loading"})}),m=undefined;return"./gnn_node_model.onnx"==a?(0,n.jsx)(n.Fragment,{children:f}):u?f:(0,n.jsxs)("div",{className:"flex gap-x-4 items-center mb-2",children:[!c&&(0,n.jsxs)("div",{className:"flex gap-x-4 items-center",children:[(0,n.jsx)("h1",{className:"text-3xl font-black",children:"Predictions"}),(0,n.jsx)("p",{className:"mt-1  mx-3",children:"No data available yet!"}),(0,n.jsx)(i.kW,{text:'Press the "Click to Predict!" to predict'})]}),f]})};t.default=o},3983:function(e,t,a){"use strict";a.r(t);var n=a(5893),s=a(7294),r=a(2434),i=a(7340),o=a(4801),l=a(5725),c=a(3164),d=a(5108);const h=e=>{let{graph_path:t,intmData:a,changed:h,predicted:u,selectedButtons:x,simulationLoading:p,setSimulation:f}=e;const m=(0,s.useRef)(null),[g,y]=(0,s.useState)(!0),b=(0,s.useRef)(a),N=(0,s.useRef)(null),j=(0,s.useRef)(0);null!=a&&d.log("From Visualizer:",a),(0,s.useEffect)((()=>{f(!1);const e=++j.current,n=async(e,n)=>{null!=a&&d.log("From Visualizer:",a),d.log("path",t);let s=[];const o=600,h=10,u=undefined,x=undefined,p=undefined,f=4800-40-30,m=1e3-h-30;r.Ys("#my_dataviz").selectAll("svg").remove();const g=r.Ys("#my_dataviz").append("svg").attr("width",f).attr("height",m);N.current=g.node();let b=[];e.forEach(((t,u)=>{d.log("i",u),d.log(t);let x=(u-2.5)*o;u>=4&&(x=(u-2.5)*o-1.5*u*25);const p=g.append("g").attr("class","layerVis").attr("transform","translate(".concat(x,",").concat(h,")")).attr("layerNum",u),N=p.selectAll("line").data(t.links).join("line").style("stroke","#aaa"),j=p.selectAll("circle").data(t.nodes).join("circle").attr("r",17).style("fill","white").style("stroke","#69b3a2").style("stroke-width",1).style("stroke-opacity",1).attr("opacity",1),w=p.selectAll("text").data(t.nodes).join("text").text((e=>e.id)).attr("font-size","17px");function v(){const e=r.Wem(t.links,(e=>e.weight)),a=r.BYU().domain(e).range([1,10]),n=r.BYU().domain(e).range([.1,1]);N.attr("x1",(e=>e.source.x)).attr("y1",(e=>e.source.y)).attr("x2",(e=>e.target.x)).attr("y2",(e=>e.target.y)).attr("transform",(function(e){if("double"===e.type){const t=e.target.x-e.source.x,a=e.target.y-e.source.y,n=Math.sqrt(t*t+a*a),s=undefined,r=-t/n*5;return"translate(".concat(a/n*5,", ").concat(r,")")}return null})).style("stroke",(function(e){return"aromatic"===e.type?"purple":"#aaa"})),j.attr("cx",(e=>e.x)).attr("cy",(e=>e.y)),w.attr("x",(e=>e.x-6)).attr("y",(e=>e.y+6))}function k(){N.attr("x1",(e=>e.source.x)).attr("y1",(e=>e.source.y)).attr("x2",(e=>e.target.x)).attr("y2",(e=>e.target.y)).attr("transform",(function(e){if("double"===e.type){const t=e.target.x-e.source.x,a=e.target.y-e.source.y,n=Math.sqrt(t*t+a*a),s=undefined,r=-t/n*5;return"translate(".concat(a/n*5,", ").concat(r,")")}return null})).style("stroke",(function(e){return"aromatic"===e.type?"purple":"#aaa"})),j.attr("cx",(e=>e.x)).attr("cy",(e=>e.y)),w.attr("x",(e=>e.x-6)).attr("y",(e=>e.y+6));let n=[];if(null!=a&&(1===u&&(n=a.conv1),2===u&&(n=a.conv2),3===u&&(n=a.conv3),4===u&&(n=a.pooling),5===u)){let e=a.final;n=(0,i.XA)(e)}t.nodes.forEach((e=>{e.graphIndex=u,null!=n&&u<=4&&n instanceof Float32Array&&(e.features=n.subarray(64*e.id,64*(e.id+1))),null!=n&&u>=5&&(e.features=n),s.push(e)}));let r=0,h=0;const x=t.nodes.slice(0,17);x.forEach((e=>{x.forEach((t=>{if(e!==t){const a=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);a>r&&(r=a),n>h&&(h=n)}}))}));const f=r+20,y=h+20,v={x:1800,y:m/8},k={x:1740,y:m/20},_={x:1740,y:m/1.7},C={x:1800,y:m/1.5},G=Math.abs(v.x-k.x),A=Math.abs(v.y-C.y),S=(v.x+_.x)/2,T=(v.y+_.y)/2,E=140;let M=(f+E+20)/G,z=(y+E+20)/A,F="translate(".concat(S,", ").concat(T,") scale(").concat(M,", ").concat(z,") translate(").concat(-S,", ").concat(-T,")");f+E<G&&y+E<A&&(F="scale(1, 1)");const V=v.x,I=C.y+100;u>=4&&(v.y-=130,k.y-=130,_.y+=70,C.y+=70,v.x+=15,C.x+=15,k.x-=15,_.x-=15);const B=p.append("polygon").attr("points","".concat(v.x,",").concat(v.y," ").concat(k.x,",").concat(k.y," ").concat(_.x,",").concat(_.y," ").concat(C.x,",").concat(C.y)).attr("stroke","black").attr("fill","none").attr("transform",F);let L=" ";0==u&&(L="Input"),u<=3&&0!=u&&(L="GCNConv".concat(u)),4===u&&(L="Pooling"),5===u&&(L="Prediction Result");const P=p.append("text").attr("class","layer-label").attr("x",V).attr("y",I).attr("text-anchor","middle").attr("fill","black").attr("font-size","15px").text(L).attr("font-weight","normal").attr("opacity",.5),Y=(0,c.qg)(n);d.log("array value",n);let D=null;D=0==u?(0,l.T1)(i.LV,0,1,L+" Color Scheme",V,I+50,p):5==u?(0,l.T1)(i.LV,n[0],n[1],L+" Color Scheme",V,I+50,p):(0,l.oh)(i.LV,Y,L+" Color Scheme",V-50,I+50,p),b.push(D),d.log("colorSchemes",b),u===e.length-1&&((0,i.gL)(s,g,e,o,0),g.selectAll("circle").attr("opacity",0),a&&(0,i.Ts)(g,s,o,m,e,900,600,15,10,3,20,b,0))}u>=4&&w.attr("opacity",0),t.nodes.forEach((e=>{n[e.id]?(e.x=n[e.id].x,e.y=n[e.id].y):(e.x=Math.random()*f,e.y=Math.random()*m),u>=4&&(e.x=1770,e.y=m/3)})),r.A4v(t.nodes).force("link",r.Fsl(t.links).id((e=>e.id)).distance(20)).stop().on("tick",v),k(),y(!1)}))},s=e=>{e===j.current&&f(!0)},x=async()=>{null!=a&&!h||u?(await p(4),s(e)):await(0,o.Ew)(t,(()=>s(e)),!0,0)},p=async e=>{try{y(!0);const a=await(0,i.wb)(t),s=await(0,i.Ke)(e,a),r=(0,o.IO)();await n(s,r)}catch(e){d.error("Error in visualizeGNN:",e)}finally{y(!1)}};x()}),[t,a]);const w=(e,t)=>{r.Ys(e).selectAll(".layerVis").each((function(e,a){const n=undefined;r.Ys(this).selectAll("text.layer-label").transition().duration(140).style("opacity",(()=>a<=2&&t[a]||3===a&&t[4]||4===a&&t[5]||5===a&&t[6]?1:.5)).attr("font-size",(()=>a<=2&&t[a]||3===a&&t[4]||4===a&&t[5]||5===a&&t[6]?"18px":"15px"))}))};return(0,s.useEffect)((()=>{N.current&&!g&&w(N.current,x),d.log("selectBtn",x)}),[x,g]),(0,n.jsx)("div",{id:"my_dataviz",ref:m,style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"start",height:"auto",overflow:"auto",overflowX:"scroll"}})};t.default=h},929:function(e,t,a){"use strict";a.r(t);var n=a(5893),s=a(7294),r=a(2434),i=a(4801),o=a(3164),l=a(5108);const c=e=>{let{graph_path:t,intmData:a,changed:c,predicted:d,selectedButtons:h}=e;const u=(0,s.useRef)(null),[x,p]=(0,s.useState)(!0);l.log("updated",a),null!=a&&l.log("From Visualizer:",a),(0,s.useEffect)((()=>{null!=a&&!c||d?(0,o.J)(p,t,a):(0,i.hz)(t,!0,400),l.log("i fire once")}),[t,a,c]);const f=(e,t)=>{r.Ys(e).selectAll(".layerVis").each((function(e,a){const n=undefined;r.Ys(this).selectAll("text.layerName").transition().duration(140).style("opacity",(()=>0===a&&t[1]||1===a&&t[2]||2===a&&t[3]||3===a&&t[4]||4===a&&t[5]?1:.5)).attr("font-size",(()=>0===a&&t[1]||1===a&&t[2]||2===a&&t[3]||3===a&&t[4]||4===a&&t[5]?"18px":"15px"))}))};return(0,s.useEffect)((()=>{const e=r.Ys("#matvis").select("svg.mats").node();e&&!x&&f(e,h),l.log("selectBtn",h)}),[h,x]),(0,n.jsx)("div",{id:"matvis",ref:u,style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"start",height:"auto",overflow:"auto",overflowX:"auto"}})};t.default=c},3555:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var n=a(5893),s=a(8119),r=a.n(s),i=a(675),o=a(1363),l=a.n(o);function c(e){return(0,n.jsx)("div",{className:"".concat(l().sidebar," ").concat(r().className," font-light"),children:(0,n.jsxs)(i.LW,{noScrollX:!0,removeTracksWhenNotUsed:!1,disableTrackYWidthCompensation:!0,trackClickBehavior:"jump",trackYProps:{style:{width:"15px",borderRadius:"10px",backgroundColor:"#f0f0f0",top:"0",bottom:"0"}},thumbYProps:{style:{backgroundColor:"#d9d9d9",borderRadius:"10px",boxShadow:"0 5px 6px rgba(0, 0, 0, 0.25)"}},children:[(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h1",{className:"text-3xl font-semibold text-3xl",children:"What is an GNN?"}),(0,n.jsx)("p",{children:"GNN Stands for Graph Neural Networks. As its name suggests, GNN is a class of neural networks that operate on graph data, which is a collection of nodes connected by edges. Consider social networks as an example, GNNs can analyze connections to understand communities, predict behavior, or recommend products based on social interactions. Nowadays, GNNs are increasingly used to solve a wide variety of tasks such as model molecules in chemistry, predict protein interactions in biology, or studying citation networks in social science."})]}),(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h1",{className:"text-3xl font-semibold text-3xl",children:"Input Data of a GNN:"}),(0,n.jsxs)("p",{children:["To start, letâ€™s establish what a graph is. A graph represents the relations (edges) between a collection of entities (nodes). For example, the right panel shows a graph of a chemical compound, from the"," ",(0,n.jsx)("a",{href:"https://huggingface.co/datasets/graphs-datasets/MUTAG",target:"__blank",children:"MUTAG"})," ","dataset. In this graph, nodes are atoms and edges are bonds between atoms."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:l().tag,children:"Representation"})," ",(0,n.jsx)("button",{className:l().button,onClick:()=>e.setIsGraphView(!e.isGraphView),children:"Click to Switch"}),(0,n.jsx)("br",{}),(0,n.jsxs)("span",{style:{color:e.isGraphView?"black":"gray"},children:[" ","Node Link Diagram"]})," ","or"," ",(0,n.jsxs)("span",{style:{color:e.isGraphView?"gray":"black"},children:[" ","Adjacency Matrix"]}),(0,n.jsx)("br",{}),"A graph can be represented as either a node-link diagram or an adjacency matrix. A node-link diagram is an intuitive visual representation of the graph where nodes are depcited as circles and edges are lines connecting the circles. It is easy to understand and informative, especially for small graphs.",(0,n.jsx)("br",{}),"An adjacency matrix is a square matrix where the rows and columns represent the nodes, and the value at each intersection (cell) indicates the presence or absence of an edge between the corresponding nodes. It is a compact way to represent the graph, especially for large and dense graphs.",(0,n.jsx)("br",{})]}),(0,n.jsx)("span",{className:l().tag,children:"Node Features"}),(0,n.jsx)("p",{children:"The information of each graph node can be stored as embeddings. For example, in the chemical compound graph, an one-hot encoding is used to represent the atom type, whether it is a carbon, oxygen, nitrogen, etc."})]}),(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)("h1",{className:"text-3xl font-semibold text-3xl",children:"Convolutions on a Graph:"}),(0,n.jsx)("p",{children:"Graphs have an irregular structure can directly use traditional neural networks, which are designed to operate on a fixed, grid-like structure input (such as sentences, images and video). To process graphs, GNNs employ a technique called message passing, where neighboring nodes exchange information and update each otherâ€™s embeddings  to better reflect their interconnectedness and individual features."}),!e.predicted&&"Click on the right side to predict and show inner layers",(0,n.jsx)("p",{children:"Message-passing forms the backbone of many GNN architectures, including Graph Convolutional Networks (GCN), Graph Attention Networks (GAT), Graph Sample and Aggregate (GraphSAGE), Graph Isomorphism Network (GIN), etc. We will start with GCN, which is one of the most popular GNN architectures."}),(0,n.jsx)("span",{className:l().button,onClick:()=>{},children:"Click to show GCNConv "}),(0,n.jsxs)("ol",{className:"list-inside list-disc",children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{className:"font-bold",children:"Aggregation with Normalization: "}),"First, a node aggregates the feature vectors of its neighbors and itself via a normalized degree matrix. Intuitively, this reduces the influence of information from nodes with too many neighbors and strengthens the influence from those with fewer neighbors."]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{className:"font-bold",children:"Weighted Transformation:"})," The aggregated information is then transformed by a learnable weight matrix. This matrix allows the model to learn the importance of different features for the central node."]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("b",{className:"font-bold",children:"Activation Function: "}),"Finally, we add a bias vector and a non-linear activation function (ReLU) to the aggregated information to obtain an updated feature vector of this node."]}),"Note that the learnable weight matrix and bias vector are shared across all nodes in the graph, mimicking the convolution operation in CNNs and minimizing the number of parameters."]}),(0,n.jsx)("p",{children:"We are working on adding other types of GNN layers, please stay tuned!"})]}),(0,n.jsx)("div",{className:"p-4",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:"text-3xl font-semibold text-3xl",children:"Tasks that GNNs can solve:"}),(0,n.jsx)("p",{children:"By learning the features of each node, GNNs can then use these node features to solve tasks at different levels of granularity, including graph-level, node-level, community-level, and edge-level tasks. This website currently supports graph-level and node-level tasks. We are working on adding support for other tasks, please stay tuned!"}),(0,n.jsx)("span",{className:l().tag,children:"Graph-Level Tasks "}),(0,n.jsx)("span",{className:l().button,onClick:()=>{},children:"Click to Predict a Graph "}),(0,n.jsxs)("p",{children:["Given a input graph, GNN can predict the properties of the entire graph. For example, in the MUTAG dataset, the task is to predict whether a molecule is mutagenic or not. After sevela layers of GCNConv, a ",(0,n.jsx)("b",{className:"font-bold",children:"global mean pooling "}),"layer is used to aggregate the node features into a single graph feature, which is then fed into ",(0,n.jsx)("b",{className:"font-bold",children:"a fully connected layer"})," to make the prediction."]}),(0,n.jsx)("span",{className:l().tag,children:"Node-Level Tasks "}),(0,n.jsx)("span",{className:l().button,onClick:()=>{},children:"Click to Predict Nodes "}),(0,n.jsxs)("p",{children:["Given a input graph, GNN can predict the properties of each node in the graph. For example, in the Karate dataset, the task is to predict the community of each person in the social network. After sevela layers of GCNConv, we apply a ",(0,n.jsx)("b",{className:"font-bold",children:"fully connected layer "})," to each node to make the prediction."]}),(0,n.jsx)("span",{className:l().tag,children:"Edge-Level Tasks "}),(0,n.jsx)("p",{children:"Coming Soon!"})]})}),(0,n.jsxs)("div",{className:"px-4",children:[(0,n.jsx)("h1",{className:"text-3xl font-semibold text-3xl",children:"About this website:"}),(0,n.jsx)("p",{children:"This website is developed and maintained by the UMN Visual Intelligence Lab. The GNNs you interact with are inferenced real-time on the your web browser, supported by the ONNX web runtime."}),"ðŸ¤¸ Team Members:",(0,n.jsxs)("ul",{className:"list-disc list-inside px-4",children:[(0,n.jsx)("li",{children:"Yilin(Harry) Lu"}),(0,n.jsx)("li",{children:"Chongwei Chen"}),(0,n.jsx)("li",{children:"Matthew Xu"}),(0,n.jsx)("li",{children:"Qianwen Wang"})]}),"ðŸ“§ Contact: qianwen@umn.edu",(0,n.jsx)("br",{}),"ðŸ’» Source Code:",(0,n.jsx)("a",{href:"https://github.com/Visual-Intelligence-UMN/web-gnn-vis",target:"_blank",children:"https://github.com/Visual-Intelligence-UMN/web-gnn-vis"})]})]})})}},8885:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return B},inter:function(){return r()},inter2:function(){return o()},inter3:function(){return c()}});var n=a(5893),s=a(4992),r=a.n(s),i=a(3817),o=a.n(i),l=a(7303),c=a.n(l),d=a(9008),h=a.n(d),u=a(7294),x=a(3983),p=a(8621),f=a(929),m=a(5108);const g=j(3),y={karate:"./json_data/nodes/karate_dataset1.json"},b={twitch_EN:"./json_data/links/twitch.json"},N={"graph classification":"./gnn_model2.onnx","node classification":"./gnn_node_model.onnx"};function j(e){let t={graph_0:"./input_graph.json"};for(let a=0;a<e;a++)t["graph_".concat(a)]="./json_data/graphs/input_graph".concat(a,".json");return m.log("Graphs List",t),t}const w=undefined,v=undefined,k=undefined,_={"node classification":"Zachary's karate club dataset is a social network of a university karate club.\nNodes are people and edges are friendships between people. Each person belongs to one of four communities. \nThe task is to predict the community of a person.\nThe training set has 4 person.\n","graph classification":"Each graph in the MUTAG dataset represents a chemical compound. Nodes are atoms and edges are bonds between atoms.\nThe task is to predict whether a molecule is mutagenic on Salmonella typhimuriumor or not (i.e., can cause genetic mutations in this bacterium or not).\nThe dataset has 188 graphs in total, with 150 graphs in the training set and 38 graphs in the test set.\n","edge classification":"The Twitch dataset is a social network of Twitch users. Nodes are Twitch users and edges are mutual follower relationships between them. \nThe task is to predict whether two users are friends or not. The graph has 77774 edges in total, with 60052 in the training set.\n"};var C=a(3555),G=a(4082),A=a.n(G),S=a(4801);function T(){return(0,n.jsx)("footer",{className:"fixed bottom-0 bg-white rounded-lg shadow m-4 w-full",children:(0,n.jsxs)("span",{className:"block text-md text-gray-500 sm:text-center dark:text-gray-400",children:["Â© ",(new Date).getFullYear()," "," ","University of Minnesota, Twin Cities. All Rights Reserved."]})})}var E=a(7670),M=a.n(E);function z(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("nav",{className:M().header,children:(0,n.jsxs)("div",{className:"flex flex-wrap items-center justify-between mx-20",children:[(0,n.jsx)("a",{href:"#",className:"flex items-center space-x-3 rtl:space-x-reverse",children:(0,n.jsx)("span",{className:"self-center text-2xl font-semibold whitespace-nowrap text-white",children:"Name and Logo Here"})}),(0,n.jsx)("div",{id:"navbar-default",children:(0,n.jsxs)("ul",{className:"font-medium flex flex-row md:space-x-8 rtl:space-x-reverse",children:[(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"#",className:"text-gray-900 md:hover:text-blue-300 md:p-0 text-white",children:"About"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"https://github.com/Visual-Intelligence-UMN/web-gnn-vis",target:"_blank",className:"text-gray-900 md:hover:text-blue-300 md:p-0 text-white ",children:"Github"})})]})})]})})})}var F=a(1423),V=a(1290),I=a(5108);function B(){const[e,t]=(0,u.useState)("graph classification"),[a,s]=(0,u.useState)("graph_2"),i=(0,u.useRef)(null),[l,d]=(0,u.useState)(null),[m,j]=(0,u.useState)(!0),[w,v]=(0,u.useState)(!0),[k,G]=(0,u.useState)(1),[E,M]=(0,u.useState)(!1),[B,L]=(0,u.useState)(!1),[P,Y]=(0,u.useState)(!1),[D,R]=(0,u.useState)(null),[W,O]=(0,u.useState)([!1,!1,!1,!1,!1,!1,!1]),[U,q]=(0,u.useState)([]);function X(e){I.log("graph handler",e.target.value),s(e.target.value),v(!0),q([]),L(!1),Y(!1)}return(0,u.useEffect)((()=>{document.body.style.zoom="70%"}),[]),(0,n.jsxs)("main",{className:r().className,children:[(0,n.jsx)(h(),{children:(0,n.jsx)("title",{children:"Graph Neural Network Visualization"})}),(0,n.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"}),(0,n.jsx)("div",{className:o().className,children:0===k&&(0,n.jsx)("div",{style:{paddingTop:"15%"},className:"bg-white min-h-screen flex justify-center items-center",children:(0,n.jsx)("h1",{className:"animate-dissolve text-6xl  font-bold text-gradient-stroke","data-text":"Welcome to a Graph Neural Network Visualizer"})})}),1===k&&(0,n.jsxs)("div",{className:"bg-white text-black",children:[(0,n.jsx)(z,{}),(0,n.jsxs)("div",{className:" ".concat(A().body,"  grid grid-cols-4 "),children:[(0,n.jsx)(C.default,{isGraphView:m,setIsGraphView:j,predicted:B}),(0,n.jsxs)("div",{className:"".concat(A().rightContainer," col-span-3 ml-4"),children:[(0,n.jsxs)("div",{className:"flex gap-x-2 items-center",style:{paddingTop:"40px"},children:[(0,n.jsx)("h1",{className:"text-3xl min-w-48 font-black",children:"GNN Model"}),(0,n.jsx)(S.Qf,{selectedOption:e,handleChange:e=>{const n=e.target.value;t(n),L(!1),Y(!1),q([]),R(null),s("node classification"===n?"karate":"graph classification"===n?"graph_2":"twitch_EN"),I.log("selectedGraph from selector",a)},OptionList:Object.keys(N)}),"graph classification"==e?(0,n.jsx)(S.VY,{selectedButtons:W,setSelectedButtons:O,predicted:B}):"node classification"==e?(0,n.jsx)(S.aq,{selectedButtons:W,setSelectedButtons:O,predicted:B}):(0,n.jsx)(S.C9,{selectedButtons:W,setSelectedButtons:O,predicted:B})]}),(0,n.jsx)("hr",{className:"border-t border-gray-300 my-4"}),(0,n.jsxs)("div",{className:"flex gap-x-4 items-center  mb-3 ",children:[(0,n.jsx)("h1",{className:"text-3xl font-black min-w-48",children:"Input Graph "}),(0,n.jsx)("div",{className:"flex items-center gap-x-4 ",children:(0,n.jsxs)("div",{className:c().className,children:["graph classification"==e?(0,n.jsx)(S.Qf,{selectedOption:a,handleChange:X,OptionList:Object.keys(g)}):"node classification"==e?(0,n.jsx)("span",{className:"text-2xl",children:"Zachary's Karate Club "}):(0,n.jsx)(S.Qf,{selectedOption:a,handleChange:X,OptionList:Object.keys(b)}),(0,n.jsx)("p",{children:_[e]})]})}),a&&(g[a]||y[a])?"graph classification"==e?(0,n.jsx)(S.i5,{path:g[a]}):(0,n.jsx)(S.i5,{path:y[a]}):null]}),(0,n.jsx)("hr",{className:"border-t border-gray-300 my-4"}),(0,n.jsxs)("div",{className:"flex gap-x-4 items-center",children:[(0,n.jsx)("div",{className:"flex gap-x-4",children:(0,n.jsx)("h2",{className:"text-3xl font-black",children:"Inner Model Visualization"})}),(0,n.jsxs)("div",{className:"flex gap-x-4",children:[(0,n.jsx)(S.r_,{handleChange:()=>{j(!m),Y(!1)},checked:m,labels:["Graph View","Matrix View"]}),(0,n.jsx)(S.kW,{text:"Change the view of GNN model"})]})]}),(0,n.jsxs)("div",{className:A().vizContainer,children:["graph classification"==e?m?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(x.default,{graph_path:g[a],intmData:D,changed:w,predicted:B,selectedButtons:W,simulationLoading:P,setSimulation:Y})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(f.default,{graph_path:g[a],intmData:D,changed:w,predicted:B,selectedButtons:W})}):"node classification"==e?m?(0,n.jsx)(V.default,{graph_path:y[a],intmData:D,changed:w,predicted:B,selectedButtons:W,simulationLoading:P,setSimulation:Y}):(0,n.jsx)(F.default,{graph_path:y[a],intmData:D,changed:w,predicted:B,selectedButtons:W}):m?(0,n.jsx)(n.Fragment,{children:"Graph View"}):(0,n.jsx)(n.Fragment,{children:"Matrix View"}),0==U.length&&(0,n.jsxs)("div",{className:"absolute top-1/2 left-1/2 ",children:[(0,n.jsx)("h1",{className:"text-4xl text-gray-300",children:"Model Visualization will show after prediction"}),"graph classification"==e?(0,n.jsx)(p.default,{graphPath:g[a],modelPath:N[e],setChangedG:v,setIntmData:R,setPredicted:L,predicted:B,probabilities:U,setProbabilities:q,onlyShownButton:!0,simulationLoading:P}):(0,n.jsx)(p.default,{graphPath:y[a],modelPath:N[e],setChangedG:v,setIntmData:R,setPredicted:L,predicted:B,probabilities:U,setProbabilities:q,onlyShownButton:!0,simulationLoading:P})]})]})]})]}),(0,n.jsx)(T,{})]})]})}},1290:function(e,t,a){"use strict";a.r(t);var n=a(5893),s=a(7294),r=a(2434),i=a(7340),o=a(4801),l=a(5725),c=a(3164),d=a(5108);const h=e=>{let{graph_path:t,intmData:a,changed:h,predicted:u,selectedButtons:x,simulationLoading:p,setSimulation:f}=e;const m=(0,s.useRef)(null),[g,y]=(0,s.useState)(!0),b=(0,s.useRef)(a),N=(0,s.useRef)(null),j=(0,s.useRef)(1);null!=a&&d.log("From Visualizer:",a),(0,s.useEffect)((()=>{f(!1);const e=++j.current,n=async(e,n)=>{null!=a&&d.log("From Visualizer:",a),d.log("path",t);let s=[];const o=600,h=10,u=undefined,x=undefined,p=undefined,f=4800-40-30,m=1e3-h-30;r.Ys("#my_dataviz").selectAll("svg").remove();const g=r.Ys("#my_dataviz").append("svg").attr("width",f).attr("height",m);N.current=g.node();let b=[];e.forEach(((t,u)=>{if(u>=5)return;d.log("i",u),d.log(t);let x=(u-2.5)*o;const p=g.append("g").attr("class","layerVis").attr("transform","translate(".concat(x,",").concat(h,")")).attr("layerNum",u),N=p.selectAll("line").data(t.links).join("line").style("stroke","#aaa"),j=p.selectAll("circle").data(t.nodes).join("circle").attr("r",17).style("fill","white").style("stroke","#69b3a2").style("stroke-width",1).style("stroke-opacity",1).attr("opacity",1),w=p.selectAll("text").data(t.nodes).join("text").text((e=>e.id)).attr("font-size","17px");function v(){const e=r.Wem(t.links,(e=>e.weight)),a=r.BYU().domain(e).range([1,10]),n=r.BYU().domain(e).range([.1,1]);N.attr("x1",(e=>e.source.x)).attr("y1",(e=>e.source.y)).attr("x2",(e=>e.target.x)).attr("y2",(e=>e.target.y)).attr("transform",(function(e){if("double"===e.type){const t=e.target.x-e.source.x,a=e.target.y-e.source.y,n=Math.sqrt(t*t+a*a),s=undefined,r=-t/n*5;return"translate(".concat(a/n*5,", ").concat(r,")")}return null})).style("stroke",(function(e){return"aromatic"===e.type?"purple":"#aaa"})),j.attr("cx",(e=>e.x)).attr("cy",(e=>e.y)),w.attr("x",(e=>e.x-6)).attr("y",(e=>e.y+6))}function k(){N.attr("x1",(e=>e.source.x)).attr("y1",(e=>e.source.y)).attr("x2",(e=>e.target.x)).attr("y2",(e=>e.target.y)).attr("transform",(function(e){if("double"===e.type){const t=e.target.x-e.source.x,a=e.target.y-e.source.y,n=Math.sqrt(t*t+a*a),s=undefined,r=-t/n*5;return"translate(".concat(a/n*5,", ").concat(r,")")}return null})).style("stroke",(function(e){return"aromatic"===e.type?"purple":"#aaa"})),j.attr("cx",(e=>e.x)).attr("cy",(e=>e.y)),w.attr("x",(e=>e.x-6)).attr("y",(e=>e.y+6));let n=null;null!=a&&(1===u&&(n=a.conv1),2===u&&(n=a.conv2),3===u&&(n=a.conv3),4===u&&(n=a.result),5===u&&(n=a.final)),t.nodes.forEach((e=>{e.graphIndex=u,null!=n&&u<=2&&n instanceof Float32Array&&(e.features=n.subarray(4*e.id,4*(e.id+1))),null!=n&&u>2&&u<4&&n instanceof Float32Array&&(e.features=n.subarray(2*e.id,2*(e.id+1))),null!=n&&u>2&&4===u&&(e.features=n[e.id]),null!=n&&u>2&&5===u&&n instanceof Float32Array&&(e.features=n.subarray(4*e.id,4*(e.id+1))),s.push(e)}));let r=0,h=0;const x=t.nodes.slice(0,35);x.forEach((e=>{x.forEach((t=>{if(e!==t){const a=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);a>r&&(r=a),n>h&&(h=n)}}))}));const f=r+20,y=h+20,v={x:1800,y:m/8},k={x:1740,y:m/20},_={x:1740,y:m/1.7},C={x:1800,y:m/1.5},G=Math.abs(v.x-k.x),A=Math.abs(v.y-C.y),S=(v.x+_.x)/2,T=(v.y+_.y)/2,E=140;let M=(f+E+20)/G,z=(y+E+20)/A,F="translate(".concat(S,", ").concat(T,") scale(").concat(M,", ").concat(z,") translate(").concat(-S,", ").concat(-T,")");f+E<G&&y+E<A&&(F="scale(1, 1)");const V=v.x,I=C.y+100;if(u<5){const e=p.append("polygon").attr("points","".concat(v.x,",").concat(v.y," ").concat(k.x,",").concat(k.y," ").concat(_.x,",").concat(_.y," ").concat(C.x,",").concat(C.y)).attr("stroke","black").attr("fill","none").attr("transform",F)}let B=" ";0==u&&(B="Input"),u<=3&&0!=u&&(B="GCNGconv".concat(u)),4===u&&(B="Prediction Result");const L=p.append("text").attr("class","layer-label").attr("x",v.x).attr("y",C.y+100).attr("text-anchor","middle").attr("fill","black").attr("font-size","15px").text(B).attr("font-weight","normal").attr("opacity",.5);if(4===u&&n){let e=[];n.forEach((t=>{e=e.concat(Array.from(t))})),n=e}let P=1;null!=n&&(P=(0,c.qg)(n));let Y=null;0==u?Y=(0,l.T1)(i.LV,0,1,B+" Color Scheme",V,I+50,p):(d.log("AWD",n,P,B,u),Y=(0,l.oh)(i.LV,P,B+" Color Scheme",V-50,I+50,p)),b.push(Y),u===e.length-3&&((0,i.gL)(s,g,e,o,1),a&&a.final&&(0,i.Ts)(g,s,o,m,e,900,600,15,10,20,20,b,1))}u>=5&&(w.attr("opacity",0),j.attr("opacity",0)),t.nodes.forEach((e=>{n[e.id]?(e.x=n[e.id].x,e.y=n[e.id].y):(e.x=Math.random()*f,e.y=Math.random()*m)})),r.A4v(t.nodes).force("link",r.Fsl(t.links).id((e=>e.id)).distance(20)).stop().on("tick",v),k(),y(!1)}))},s=e=>{e===j.current&&f(!0)},x=async()=>{null!=a&&!h||u?(await p(5),s(e)):await(0,o.Ew)(t,(()=>s(e)),!1,1)},p=async e=>{try{y(!0);const a=await(0,i.wb)(t),s=await(0,i.Ke)(e,a),r=(0,o.IO)();await n(s,r)}catch(e){d.error("Error in visualizeGNN:",e)}finally{y(!1)}};x()}),[t,a]);const w=(e,t)=>{r.Ys(e).selectAll(".layerVis").each((function(e,a){const n=undefined;r.Ys(this).selectAll("text.layer-label").transition().duration(140).style("opacity",(()=>a<=2&&t[a]||3===a&&t[4]||4===a&&t[5]||5===a&&t[6]?1:.5)).attr("font-size",(()=>a<=2&&t[a]||3===a&&t[4]||4===a&&t[5]||5===a&&t[6]?"18px":"15px"))}))};return(0,s.useEffect)((()=>{N.current&&!g&&w(N.current,x),d.log("selectBtn",x)}),[x,g]),(0,n.jsx)("div",{id:"my_dataviz",ref:m,style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"start",height:"auto",overflow:"auto",overflowX:"scroll"}})};t.default=h},1423:function(e,t,a){"use strict";a.r(t);var n=a(5893),s=a(7294),r=a(2434),i=a(4801),o=a(3164),l=a(5108);const c=e=>{let{graph_path:t,intmData:a,changed:c,predicted:d,selectedButtons:h}=e;const u=(0,s.useRef)(null),[x,p]=(0,s.useState)(!0);return l.log("updated Node",a),null!=a&&l.log("From Node Visualizer:",a),(0,s.useEffect)((()=>{null!=a&&!c||d?(0,o.Yn)(p,t,a):(0,i.hz)(t,!1,800),l.log("i fire once")}),[t,a,c]),(0,s.useEffect)((()=>{const e=r.Ys("#matvis").select("svg.mats").node()}),[h,x]),(0,n.jsx)("div",{id:"matvis",ref:u,style:{width:"100%",display:"flex",flexDirection:"column",alignItems:"start",height:"auto",overflow:"auto",overflowX:"auto"}})};t.default=c},3817:function(e){e.exports={style:{fontFamily:"'__Inter_da3e6b', '__Inter_Fallback_da3e6b'",fontWeight:200,fontStyle:"normal"},className:"__className_da3e6b",variable:"__variable_da3e6b"}},7303:function(e){e.exports={style:{fontFamily:"'__Inter_9f30e7', '__Inter_Fallback_9f30e7'",fontWeight:400,fontStyle:"normal"},className:"__className_9f30e7",variable:"__variable_9f30e7"}},4992:function(e){e.exports={style:{fontFamily:"'__Inter_c26f42', '__Inter_Fallback_c26f42'",fontWeight:500,fontStyle:"normal"},className:"__className_c26f42",variable:"__variable_c26f42"}},1363:function(e){e.exports={sidebar:"sidebar_sidebar__yEJ2i",tag:"sidebar_tag__ZO19C",button:"sidebar_button__bCB99"}},4082:function(e){e.exports={body:"index_body__vhdBi",rightContainer:"index_rightContainer__Prhmg",vizContainer:"index_vizContainer__S3OvQ"}},7670:function(e){e.exports={header:"surfaces_header__klON_"}},9008:function(e,t,a){e.exports=a(7828)}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[958,978,764,785,164,888,774,179],(function(){return t(8312)}));var a=e.O();_N_E=a}]);